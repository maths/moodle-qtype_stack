{"version":3,"file":"container.min.js","sources":["../../src/metadata/container.js"],"sourcesContent":["// This file is part of Stack - http://stack.maths.ed.ac.uk/\n//\n// Stack is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Stack is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Stack.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Main STACK metadata component\n *\n * @module     qtype_stack/metadata\n * @copyright  2025 University of Edinburgh\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n */\n\nimport {BaseComponent} from 'core/reactive';\nimport {metadata} from 'qtype_stack/metadata/metadata';\nimport {notifyFieldValidationFailure} from 'core_form/events';\n\nexport default class extends BaseComponent {\n    create() {\n        this.name = 'stack-metadata-container';\n        this.selectors = {\n            METADATACONTAINER: `[data-for='qtype-stack-metadata']`,\n            UPDATEJSON: `#stack-metadata-update`,\n            UPDATEINPUTS: `#stack-metadata-update-inputs`,\n            ADDITEM: `[name=\"smd_add\"]`,\n            DELETEITEM: `[name=\"smd_delete\"]`,\n            MAKECONTRIBUTOR: `#stack-metadata-make-contributor`,\n            MAKECREATOR: `#stack-metadata-make-creator`,\n            REVERT: `#stack-metadata-revert`,\n            FORMJSON: 'input[name=\"metadata\"]',\n            JSONINPUT: '#id_metadata_json',\n            REQUIREDINPUTS: '#qtype-stack-metadata-content input[aria-required=\"true\"]',\n            ALLINPUTS: '#qtype-stack-metadata-content [id^=\"smdi\"]',\n        };\n        metadata.container = this;\n    }\n\n    /**\n     * Static method to create a component instance form the mustache template.\n     *\n     * @param {string} target the DOM main element or its ID\n     * @param {object} selectors optional css selector overrides\n     * @return {Component}\n     */\n    static init(target, selectors) {\n        return new this({\n            element: document.querySelector(target),\n            reactive: metadata,\n            selectors,\n        });\n    }\n\n    /**\n     * Initial state ready method.\n     *\n     * @param {object} state the initial state\n     */\n    async stateReady(state) {\n        await this.reloadContainerComponent({state});\n    }\n\n    /**\n     * Set to refresh display on any state change.\n     *\n     * @returns {object} watchers\n     */\n    getWatchers() {\n        return [\n            {watch: `state:updated`, handler: this.reloadContainerComponent},\n        ];\n    }\n\n    /**\n     * Converts field information into element suitable for feeding into Mustache templates.\n     *\n     * @param {bool} required\n     * @param {mixed} id to link to state\n     * @param {string} tag type of field\n     * @param {mixed} value of element\n     * @returns {object}\n     */\n    createDataElement(required, id, tag, value) {\n        return {\n            required: required,\n            element: {\n                value: value,\n                wrapperid: 'fitem_smdi_' + id + '_' + tag,\n                id: 'smdi_' + id + '_' + tag,\n                name: 'smdi_' + id + '_' + tag,\n                iderror: 'smde_' + id + '_' + tag + '_error'\n            }\n        };\n    }\n\n    async reloadContainerComponent({state}) {\n        // Mustache data is not fully compatible with state object so we need to convert it\n        // into a plain object.\n        const data = {\n            creator: {},\n            contributor: [],\n            language: [],\n            license: this.createDataElement(true, 0, 'license_value', state.license.value),\n            isPartOf: this.createDataElement(false, 0, 'isPartOf_value', state.isPartOf.value),\n            scope: [],\n        };\n\n        // Need to copy licenses list as we modify to mark as selected.\n        data.license.element.options = JSON.parse(JSON.stringify(metadata.lib.licenses));\n        const selectedLicense = state.license.value;\n        let selectedOption = data.license.element.options.find((op) => op.value === selectedLicense);\n        if (selectedOption) {\n            selectedOption.selected = true;\n        } else {\n            data.license.element.options.push({value: state.license.value, text: state.license.value, selected: true});\n        }\n        data.license.element.tags = '[]';\n        data.license.element.ajax = '';\n        data.license.element.placeholder = metadata.lib.placeholder;\n        data.license.element.noselectionstring = '';\n        data.license.element.showsuggestions = 'true';\n        data.license.element.casesensitive = 'false';\n\n        state.language.forEach(language => {\n            const element = { id: language.id, lang: this.createDataElement(true, language.id, 'language_value', language.value) };\n            data.language.push({...element});\n        });\n\n        state.contributor.forEach(contributor => {\n             const element = {\n                firstname: this.createDataElement(false, contributor.id, 'contributor_firstName', contributor.firstName),\n                lastname: this.createDataElement(true, contributor.id, 'contributor_lastName', contributor.lastName),\n                institution: this.createDataElement(false, contributor.id, 'contributor_institution', contributor.institution),\n                year: this.createDataElement(false, contributor.id, 'contributor_year', contributor.year),\n                id: contributor.id,\n            };\n            data.contributor.push({...element});\n        });\n\n        const scopeHolder = {};\n        // Rearrange additional metadata by scope.\n        state.additional.forEach(additional => {\n            const element = {\n                property: this.createDataElement(true, additional.id, 'additional_property', additional.property),\n                qualifier: this.createDataElement(false, additional.id, 'additional_qualifier', additional.qualifier),\n                value: this.createDataElement(false, additional.id, 'additional_value', additional.value),\n                id: additional.id,\n            };\n            if (!scopeHolder[additional.scope]) {\n                scopeHolder[additional.scope] = [];\n            }\n            scopeHolder[additional.scope].push(element);\n        });\n        for (const scope in scopeHolder) {\n            const current = {\n                name: scope,\n                firstProp: scopeHolder[scope][0].id,\n                properties: scopeHolder[scope],\n                input: this.createDataElement(true, scopeHolder[scope][0].id, 'additional_scope', scope)\n            };\n            data.scope.push(current);\n        }\n\n        data.creator = {\n            firstname: this.createDataElement(false, 0, 'creator_firstName', state.creator.firstName),\n            lastname: this.createDataElement(true, 0, 'creator_lastName', state.creator.lastName),\n            institution: this.createDataElement(false, 0, 'creator_institution', state.creator.institution),\n            year: this.createDataElement(false, 0, 'creator_year', state.creator.year),\n        };\n\n        data.json = {\n            required: true,\n            element: {\n                value: JSON.stringify(state, metadata.replacer, 4),\n                attributes: 'rows=\"10\"',\n                wrapperid: 'fitem_metadata_json',\n                id: 'id_metadata_json',\n                name: 'metadata_json',\n            }\n        };\n\n        // To render a child component we need a container.\n        const metadataContainer = this.getElement(this.selectors.METADATACONTAINER);\n        if (!metadataContainer) {\n            throw new Error('Missing metadata container.');\n        }\n\n        await this.renderComponent(metadataContainer, 'qtype_stack/metadata/metadatacontent', data);\n\n        // Add all the event listeners as all elements have been destroyed and rebuilt.\n        this.addEventListener(\n            this.getElement(this.selectors.UPDATEJSON),\n            'click',\n            this.update\n        );\n        const addButtons = this.getElements(this.selectors.ADDITEM);\n        for (const addButton of addButtons) {\n            this.addEventListener(\n                addButton,\n                'click',\n                this.addItem\n            );\n        }\n        const deleteButtons = this.getElements(this.selectors.DELETEITEM);\n        for (const deleteButton of deleteButtons) {\n            this.addEventListener(\n                deleteButton,\n                'click',\n                this.deleteItem\n            );\n        }\n        this.addEventListener(\n            this.getElement(this.selectors.UPDATEINPUTS),\n            'click',\n            this.updateInputs\n        );\n        this.addEventListener(\n            this.getElement(this.selectors.MAKECREATOR),\n            'click',\n            this.makeCreator\n        );\n        this.addEventListener(\n            this.getElement(this.selectors.MAKECONTRIBUTOR),\n            'click',\n            this.makeContributor\n        );\n        this.addEventListener(\n            this.getElement(this.selectors.REVERT),\n            'click',\n            this.revert\n        );\n\n        // Deal with case of brkon JSON in saved question. The errormessage is saved on initial setup.\n        // We load in the original un-prettified JSON and display error message, giving user chance to edit.\n        // After this, though, they'll need to sort it out - if we're back here again then we'll use\n        // JSON created from current content of state.\n        if (metadata.lib.brokenMetadata) {\n            const jsonElement = this.getElement(this.selectors.JSONINPUT);\n            jsonElement.value = document.querySelector(this.selectors.FORMJSON).value ?? '';\n            notifyFieldValidationFailure(jsonElement, metadata.lib.brokenMetadata);\n            delete metadata.lib.brokenMetadata;\n        }\n    }\n\n    /**\n     * Updates state based on contents of inputs.\n     *\n     * @param {bool} mustValidate Do we want validation to occur?\n     * We check when explicitly asked for and when attempting to close the modal other than by cancel.\n     * We don't check when e.g. adding a contributor. This means state can be invalid but we only\n     * update the edit form entry after successful validation on modal close.\n     * @returns {bool} Returns false on validation error.\n     */\n    async update(mustValidate = true) {\n        if (mustValidate) {\n            // TO-DO Do we need other validation and/or different required fields.\n            const requiredElements = this.getElements(this.selectors.REQUIREDINPUTS);\n            let isError = false;\n            for (const element of requiredElements) {\n                if (element.value === '') {\n                    isError = true;\n                    notifyFieldValidationFailure(element, 'Required');\n                } else if (element.classList.contains('is-invalid')) {\n                    // Reset warning as field no longer empty.\n                    notifyFieldValidationFailure(element, '');\n                }\n            }\n            if (isError) {\n                return false;\n            }\n        }\n        // Elements have ids in form smdi-id-category-field e.g. smdi-1-contributor-year.\n        // id is category entry id in state. 0 is used for single elements e.g. license.\n        // Multi-elements begin counting from 1.\n        let inputElements = this.getElements(this.selectors.ALLINPUTS);\n        inputElements = Array.from(inputElements).map((el) => [el.id, el.value]);\n        await this.reactive.dispatch('updateAll', inputElements);\n        return true;\n    }\n\n    /**\n     * Add a new row to modal form.\n     * We have to update state from the input fields first or any changes will\n     * be wiped when we refresh the display to show the new row.\n     *\n     * @param {*} event\n     */\n    async addItem(event) {\n        const result = await this.update(true);\n        if (result) {\n            const parts = event.target.id.split('_');\n            this.reactive.dispatch('addItem', parts[1], parts[2]);\n        }\n    }\n    /**\n     * Delete a row from modal form.\n     * We have to update state from the input fields first or any changes will\n     * be wiped when we refresh the display toremove the row\n     *\n     * @param {*} event\n     */\n    async deleteItem(event) {\n        const result = await this.update(false);\n        if (result) {\n            const parts = event.target.id.split('_');\n            this.reactive.dispatch('deleteRow', parts[1], parts[2]);\n        }\n    }\n\n    /**\n     * Update state from the currently entered JSON if JSON is valid.\n     */\n    updateInputs() {\n        const jsonElement = this.getElement(this.selectors.JSONINPUT);\n        let data = null;\n        try {\n            data = metadata.jsonToState(jsonElement.value);\n            notifyFieldValidationFailure(jsonElement, '');\n        } catch (e) {\n            notifyFieldValidationFailure(jsonElement, e.message);\n            return;\n        }\n        jsonElement.value = JSON.stringify(data, metadata.replacer, 4);\n        this.reactive.dispatch('updateFromJson', data);\n    }\n\n    /**\n     * Add the current user as a contributor.\n     */\n    async makeContributor() {\n        const result = await this.update(false);\n        if (result) {\n            this.reactive.dispatch('addItem', 'contributor', 'user');\n        }\n    }\n\n    /**\n     * Make current user the creator.\n     */\n    makeCreator() {\n        this.getElement('#smdi_0_creator_firstName').value = metadata.lib.user.firstname;\n        this.getElement('#smdi_0_creator_lastName').value = metadata.lib.user.lastname;\n        this.getElement('#smdi_0_creator_institution').value = metadata.lib.user.institution;\n        this.getElement('#smdi_0_creator_year').value = new Date().getFullYear();\n    }\n\n    /**\n     * Return JSON to the current version on the edit form. This will be either the saved\n     * version from the question or the update from a previous close and validate of the metadata modal.\n     * If the JSON is valid, update the state so the inputs match. If invalid, setup as on initial failure\n     * in metadata.js.\n     */\n    revert() {\n        const jsonElement = this.getElement(this.selectors.JSONINPUT);\n        let previousdataJSON = document.querySelector(this.selectors.FORMJSON).value ?? null;\n        let previousdata = null;\n        try {\n            previousdata = metadata.jsonToState(previousdataJSON);\n            notifyFieldValidationFailure(jsonElement, '');\n        } catch (e) {\n            notifyFieldValidationFailure(jsonElement, e.message);\n            jsonElement.value = previousdataJSON;\n            metadata.lib.brokenMetadata = e.message;\n            this.reactive.dispatch('updateFromJson', metadata.jsonToState('{}'));\n            return;\n        }\n        jsonElement.value = JSON.stringify(previousdata, metadata.replacer, 4);\n        this.reactive.dispatch('updateFromJson', previousdata);\n    }\n}"],"names":["BaseComponent","create","name","selectors","METADATACONTAINER","UPDATEJSON","UPDATEINPUTS","ADDITEM","DELETEITEM","MAKECONTRIBUTOR","MAKECREATOR","REVERT","FORMJSON","JSONINPUT","REQUIREDINPUTS","ALLINPUTS","container","this","target","element","document","querySelector","reactive","metadata","state","reloadContainerComponent","getWatchers","watch","handler","createDataElement","required","id","tag","value","wrapperid","iderror","data","creator","contributor","language","license","isPartOf","scope","options","JSON","parse","stringify","lib","licenses","selectedLicense","selectedOption","find","op","selected","push","text","tags","ajax","placeholder","noselectionstring","showsuggestions","casesensitive","forEach","lang","firstname","firstName","lastname","lastName","institution","year","scopeHolder","additional","property","qualifier","current","firstProp","properties","input","json","replacer","attributes","metadataContainer","getElement","Error","renderComponent","addEventListener","update","addButtons","getElements","addButton","addItem","deleteButtons","deleteButton","deleteItem","updateInputs","makeCreator","makeContributor","revert","brokenMetadata","jsonElement","requiredElements","isError","classList","contains","inputElements","Array","from","map","el","dispatch","event","parts","split","jsonToState","e","message","user","Date","getFullYear","previousdataJSON","previousdata"],"mappings":"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"}