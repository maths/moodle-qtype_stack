define("qtype_stack/metadata/metadatamodal",["exports","core/modal","qtype_stack/metadata/metadata","qtype_stack/metadata/container"],(function(_exports,_modal,_metadata,_container){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.setup=_exports.MetadataModal=void 0,_modal=_interopRequireDefault(_modal),_container=_interopRequireDefault(_container);var _systemImportTransformerGlobalIdentifier="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class MetadataModal extends _modal.default{async hide(){await _metadata.metadata.container.update(!0)&&(document.querySelector('input[name="metadata"]').value=JSON.stringify(_metadata.metadata.state,_metadata.metadata.replacer),super.hide())}cancel(){super.hide()}}_exports.MetadataModal=MetadataModal,_defineProperty(MetadataModal,"TYPE","qtype_stack/metadatamodal"),_defineProperty(MetadataModal,"TEMPLATE","qtype_stack/metadata/metadatamodal");let registered=!1;registered||(!async function(){if("function"!=typeof MetadataModal.create){(await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core/modal_registry"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core/modal_registry")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core/modal_registry"]))).register(MetadataModal.TYPE,MetadataModal,MetadataModal.TEMPLATE)}}(),registered=!0);let modal=null;function closeModal(){modal.cancel.call(modal)}async function openModal(){let addListener=!1;if(modal)modal.show();else{if("function"==typeof MetadataModal.create)modal=await MetadataModal.create(),modal.show();else{const ModalFactory=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core/modal_factory"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core/modal_factory")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core/modal_factory"]));modal=await ModalFactory.create({type:MetadataModal.TYPE}),modal.show(),_container.default.init("#qtype-stack-metadata-main")}addListener=!0}addListener&&document.querySelector("#stackmetadata_cancel").addEventListener("click",closeModal)}_exports.setup=()=>{var _document$querySelect;null===(_document$querySelect=document.querySelector("#id_metadatamodal"))||void 0===_document$querySelect||_document$querySelect.addEventListener("click",openModal),_metadata.metadata.loadState()}}));

//# sourceMappingURL=metadatamodal.min.js.map